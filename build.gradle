buildscript {
	repositories {
		mavenCentral()
	}
	dependencies {
		classpath 'com.android.tools.build:gradle:1.2.3'
	}
}

apply plugin: 'android'

repositories {
	mavenLocal()
	mavenCentral()
}

dependencies {
	compile fileTree(dir: 'libs', include: ['*.jar'])
}

android {
	defaultConfig {
			versionCode 1068      // increment with every release
			versionName '1.4.5.' + versionCode   // change with every release
			archivesBaseName = "medic-collect-" + versionName // + "." + versionCode
	}
	productFlavors {
		base {
			// we will not create project-specific src directories
			// for `base` - it will use the defaults in
			// src/main
		}
		demo {
			applicationId = 'org.medicmobile.webapp.mobile.demo'
			versionName = android.defaultConfig.versionName + "-demo"
		}
		intrahealthsenegal {
			applicationId = 'org.medicmobile.webapp.mobile.intrahealthsenegal'
			versionName = android.defaultConfig.versionName + "-seda"
		}
	}
	sourceSets {
		main {
			manifest.srcFile 'AndroidManifest.xml'
			java.srcDirs = ['src']
			resources.srcDirs = ['src']
			res.srcDirs = ['res']
			assets.srcDirs = ['assets']
		}
		demo.setRoot('../medic-projects/_medic-collect-flavors/demo')
		intrahealthsenegal.setRoot('../medic-projects/_medic-collect-flavors/intrahealthsenegal')
	}
	compileSdkVersion 22
	buildToolsVersion '22.0.1'
	packagingOptions {
		exclude 'META-INF/LICENSE'
		exclude 'META-INF/LICENSE.txt'
		exclude 'META-INF/NOTICE'
		exclude 'META-INF/NOTICE.txt'
		exclude 'META-INF/DEPENDENCIES'
	}

	lintOptions {
		abortOnError false
	}

	buildTypes {
		release {
			minifyEnabled false
			proguardFile getDefaultProguardFile('proguard-android.txt')
			signingConfig signingConfigs.debug
		}
	}
}
